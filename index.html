<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Health literacy 선별검사</title>
  <style>
    body { font-family: sans-serif; max-width: 400px; margin: 30px auto; }
    label { display: block; margin: 12px 0 2px 0; }
    select, input[type="number"] { width: 120px; }
    #result { margin-top: 20px; font-weight: bold; }
    .desc { font-size: 0.95em; color: #555; margin-bottom: 8px; }
    .guide {
      background: #f1f7ff;
      border-left: 4px solid #1976d2;
      padding: 12px 16px;
      margin-bottom: 18px;
      font-size: 0.98em;
      color: #222;
    }
    button { margin-top: 15px; }
  </style>
</head>
<body>
  <h2>Health literacy 예측 계산기</h2>
  <div class="guide">
    <b>이 계산기는 일차의료 현장에서 신속하게 건강 문해력(Health literacy)을 예측할 수 있도록 개발된 도구입니다.</b><br><br>
    본 계산기는 실제 데이터를 기반으로 한 로지스틱 회귀 모델을 사용합니다.<br>
    입력하신 정보(최종학력, 연령, 가구원수, 민간의료보험 유무)를 바탕으로 건강 문해력이 평균 이상일 확률을 예측합니다.<br><br>
    <b>모델 성능</b><br>
    - 정확도(Accuracy): 0.66<br>
    - 민감도(Sensitivity): 0.68<br>
    - 특이도(Specificity): 0.63<br><br>
    <b>Cut-off 안내</b><br>
    예측 확률이 <b>0.59 이상</b>이면 건강 문해력이 평균 이상일 가능성이 높으며,<br>
    <b>0.59 미만</b>이면 평균 미만일 가능성이 높습니다.<br><br>
    <span style="color:#1976d2; font-size:0.96em;">
      본 예측 계산기는 실제 건강 문해력 평가를 대체하는 것이 아니라,<br>
      의료 현장에서 빠른 선별 및 상담 참고용으로 활용하시길 권장합니다.
    </span>
  </div>
  <form id="regForm" onsubmit="calcLogit(); return false;">
    <label>
      최종학력(educ):
      <select id="educ">
        <option value="1">1: 초졸 이하</option>
        <option value="2">2: 중졸</option>
        <option value="3">3: 고졸</option>
        <option value="4">4: 대졸 이상</option>
      </select>
    </label>
    <div class="desc">최종학력 (1: 초졸 이하, 2: 중졸, 3: 고졸, 4: 대졸 이상)</div>

    <label>
      연령(age): <input type="number" id="age" value="50" min="0" max="120" step="1">
    </label>
    <div class="desc">연령 (숫자, 예: 70)</div>

    <label>
      가구원수(cfam): <input type="number" id="cfam" value="3" min="1" step="1">
    </label>
    <div class="desc">가구원수 (숫자, 예: 3)</div>

    <label>
      민간의료보험(npins):
      <select id="npins">
        <option value="1">1: 유</option>
        <option value="2">2: 무</option>
      </select>
    </label>
    <div class="desc">민간의료보험 유무 (유: 1, 무: 2)</div>

    <button type="submit">계산하기</button>
  </form>
  <div id="result"></div>

  <script>
    function calcLogit() {
      // 입력값 읽기
      var educ = parseInt(document.getElementById('educ').value) || 1;
      var age  = parseFloat(document.getElementById('age').value) || 0;
      var cfam = parseFloat(document.getElementById('cfam').value) || 0;
      var npins = parseInt(document.getElementById('npins').value) || 1;

      // 회귀 계수 (예시값, 실제 모델에 맞게 수정 필요)
      var intercept = 2.460317;
      var coef_educ = 0.7;      // 예시: 학력 1단계 증가당 logit 0.7 증가
      var coef_npins = -0.388957;
      var coef_cfam  = 0.217770;
      var coef_age   = -0.021905;

      // 계산
      var logit = intercept + coef_educ * educ + coef_npins * npins + coef_cfam * cfam + coef_age * age;
      var odds = Math.exp(logit);
      var prob = odds / (1 + odds);

      // 결과 출력
      document.getElementById('result').innerHTML =
        "logit: " + logit.toFixed(3) + "<br>" +
        "odds: " + odds.toFixed(3) + "<br>" +
        "예측 확률: <span style='color:blue'>" + (prob*100).toFixed(1) + "%</span>";
    }
  </script>
</body>
</html>
